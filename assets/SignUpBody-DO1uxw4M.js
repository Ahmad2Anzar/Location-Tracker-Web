import{l as i,R as c,r as n,j as e}from"./index-BRKVqLoG.js";import{F as x,d as Z,a as k,c as S,b as C}from"./index-CBXDEUiC.js";const J=i({key:"username",default:""}),L=i({key:"name",default:""}),G=i({key:"managerId",default:""}),H=i({key:"mobile",default:""}),K=i({key:"password",default:""}),Q=i({key:"confirmPassword",default:""}),W=i({key:"token",default:""}),X={username:J,name:L,managerId:G,mobile:H,password:K,confirmPassword:Q,token:W},m=X;class Y{constructor(){this.errors={}}validate(s){this.errors={};let a="";return s.forEach(({id:r,value:l})=>{switch(r){case"mobile":this.validateMobile(l,r);break;case"username":this.validateUsername(l,r);break;case"name":this.validateName(l,r);break;case"managerId":this.validateManagerId(l,r);break;case"password":this.validatePassword(l,r),a=l;break;case"confirmPassword":this.validateConfirmPassword(l,a,r);break}}),this.errors}validatePassword(s,a){(!s||!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s))&&(this.errors[a]="Password must be at least 8 characters long, with at least one uppercase letter, one lowercase letter, one number, and one special character.")}validateConfirmPassword(s,a,r){s?s!==a&&(this.errors[r]="Passwords do not match."):this.errors[r]="Confirm Password is required."}validateManagerId(s,a){(!s||isNaN(s))&&(this.errors[a]="Manager ID is required and must be a number.")}validateMobile(s,a){s?/^\+?[0-9]{10,15}$/.test(s)||(this.errors[a]="Please enter a valid phone number."):this.errors[a]="Mobile number is required."}validateUsername(s,a){(!s||s.length<2)&&(this.errors[a]="Username must be at least 2 characters long.")}validateName(s,a){(!s||s.length<2)&&(this.errors[a]="Name must be at least 2 characters long.")}}const ee=Y;function te({isSubmitClicked:b}){const[s,a]=c(m.username),[r,l]=c(m.name),[u,I]=c(m.mobile),[p,M]=c(m.managerId),[f,U]=c(m.password),[w,q]=c(m.confirmPassword),[g,F]=n.useState(!1),[h,R]=n.useState(!1),[v,$]=n.useState(!1),[y,V]=n.useState(!1),[j,_]=n.useState(!1),[N,A]=n.useState(!1),[P,O]=n.useState(!1),[E,T]=n.useState(!1),[z,B]=n.useState(!0);n.useEffect(()=>{if(z){B(!1);return}const t=new ee,d=[{id:"username",value:s},{id:"name",value:r},{id:"mobile",value:u},{id:"managerId",value:p},{id:"password",value:f},{id:"confirmPassword",value:w}],o=t.validate(d);$(o.username||!1),V(o.name||!1),_(o.mobile||!1),A(o.managerId||!1),O(o.password||!1),T(o.confirmPassword||!1),Object.values(o).some(Boolean)||D()},[b]);const D=async()=>{let t={username:s,name:r,phoneNumber:u,password:f,managerId:p};try{const d=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await d.json();if(!d.ok)throw new Error(o.message||"Signup failed");console.log("User signed up successfully:",o)}catch(d){console.error("Error signing up:",d.message)}};return e.jsx("div",{className:"w-full px-4 pt-12 pb-12 bg-red-100  flex justify-center items-center ",children:e.jsxs("form",{className:"bg-white shadow-2xl w-100 rounded-2xl px-8 pt-16 pb-8 mb-4 transform transition-all duration-300 hover:scale-[1.01]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:s,type:"text",name:"username",id:"username",placeholder:"Username",onChange:t=>{a(t.target.value)},required:!0,className:"pl-12 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"})]}),v&&e.jsx("div",{className:"text-red-500 text-sm",children:v})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:r,type:"text",name:"name",id:"name",placeholder:"   Full Name",onChange:t=>{l(t.target.value)},required:!0,className:"pl-8 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"})]}),y&&e.jsx("div",{className:"text-red-500 text-sm",children:y})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:u,type:"tel",name:"mobile",id:"mobile",placeholder:"    Mobile Number",onChange:t=>{I(t.target.value)},required:!0,className:"pl-8 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"})]}),j&&e.jsx("div",{className:"text-red-500 text-sm",children:j})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:p,type:"Number",name:"managerId",id:"managerId",placeholder:"    Manager ID",onChange:t=>M(t.target.value),required:!0,className:"pl-8 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"})]}),N&&e.jsx("div",{className:"text-red-500 text-sm",children:N})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:f,type:g?"text":"password",name:"password",id:"password",placeholder:"    Password",onChange:t=>{U(t.target.value)},required:!0,className:"pl-8 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"}),e.jsx("button",{type:"button",onClick:()=>F(!g),className:"absolute inset-y-0 right-3 flex items-center text-gray-500 hover:text-gray-700 transition",children:g?e.jsx(S,{}):e.jsx(C,{})})]}),P&&e.jsx("div",{className:"text-red-500 text-sm",children:P})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-4 top-3 text-gray-500"}),e.jsx("input",{value:w,type:h?"text":"password",name:"confirmPassword",id:"confirmPassword",placeholder:"    Confirm Password",onChange:t=>{q(t.target.value)},required:!0,className:"pl-8 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none bg-gray-100"}),e.jsx("button",{type:"button",onClick:()=>R(!h),className:"absolute inset-y-0 right-3 flex items-center text-gray-500 hover:text-gray-700 transition",children:h?e.jsx(S,{}):e.jsx(C,{})})]}),E&&e.jsx("div",{className:"text-red-500 text-sm",children:E})]})]})})}export{te as default};
